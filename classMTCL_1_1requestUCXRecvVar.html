<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CommLib: MTCL::requestUCXRecvVar Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">CommLib
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceMTCL.html">MTCL</a></li><li class="navelem"><a class="el" href="classMTCL_1_1requestUCXRecvVar.html">requestUCXRecvVar</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classMTCL_1_1requestUCXRecvVar-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">MTCL::requestUCXRecvVar Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Variable-length receive request for UCX stream-based transports.  
 <a href="classMTCL_1_1requestUCXRecvVar.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="ucx_8hpp_source.html">ucx.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for MTCL::requestUCXRecvVar:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classMTCL_1_1requestUCXRecvVar.png" usemap="#MTCL::requestUCXRecvVar_map" alt=""/>
  <map id="MTCL::requestUCXRecvVar_map" name="MTCL::requestUCXRecvVar_map">
<area href="classMTCL_1_1request__internal.html" alt="MTCL::request_internal" shape="rect" coords="0,0,169,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aeaa23e0cbb43fee1a00c605c6d2663ff" id="r_aeaa23e0cbb43fee1a00c605c6d2663ff"><td class="memItemLeft" align="right" valign="top"><a id="aeaa23e0cbb43fee1a00c605c6d2663ff" name="aeaa23e0cbb43fee1a00c605c6d2663ff"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>arm_request</b> ()</td></tr>
<tr class="separator:aeaa23e0cbb43fee1a00c605c6d2663ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af32c0d9faee1d629160b3cd44966f4f5" id="r_af32c0d9faee1d629160b3cd44966f4f5"><td class="memItemLeft" align="right" valign="top"><a id="af32c0d9faee1d629160b3cd44966f4f5" name="af32c0d9faee1d629160b3cd44966f4f5"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>requestUCXRecvVar</b> (ucp_ep_h ep, ucp_worker_h w, void *buff, size_t capacity, size_t known_msg_size, done_cb_t cb=nullptr, void *ctx=nullptr)</td></tr>
<tr class="separator:af32c0d9faee1d629160b3cd44966f4f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada0210b539d71eeec410a49b3699b4cf" id="r_ada0210b539d71eeec410a49b3699b4cf"><td class="memItemLeft" align="right" valign="top"><a id="ada0210b539d71eeec410a49b3699b4cf" name="ada0210b539d71eeec410a49b3699b4cf"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>requestUCXRecvVar</b> (ucp_ep_h ep, ucp_worker_h w, void *buff, size_t capacity, done_cb_t cb=nullptr, void *ctx=nullptr)</td></tr>
<tr class="separator:ada0210b539d71eeec410a49b3699b4cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec27d7e24b59bd6e044c467b08f1057c" id="r_aec27d7e24b59bd6e044c467b08f1057c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMTCL_1_1requestUCXRecvVar.html#aec27d7e24b59bd6e044c467b08f1057c">test</a> (int &amp;result) override</td></tr>
<tr class="separator:aec27d7e24b59bd6e044c467b08f1057c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae01070f7b9ebe07910fcdc63130bfe53" id="r_ae01070f7b9ebe07910fcdc63130bfe53"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMTCL_1_1requestUCXRecvVar.html#ae01070f7b9ebe07910fcdc63130bfe53">wait</a> () override</td></tr>
<tr class="separator:ae01070f7b9ebe07910fcdc63130bfe53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5615d6cd1ef63c0f6a669bc06dd3f7c6" id="r_a5615d6cd1ef63c0f6a669bc06dd3f7c6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMTCL_1_1requestUCXRecvVar.html#a5615d6cd1ef63c0f6a669bc06dd3f7c6">make_progress</a> () override</td></tr>
<tr class="separator:a5615d6cd1ef63c0f6a669bc06dd3f7c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31cf4023aa8c513b288c21d0147f2091" id="r_a31cf4023aa8c513b288c21d0147f2091"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMTCL_1_1requestUCXRecvVar.html#a31cf4023aa8c513b288c21d0147f2091">count</a> () const override</td></tr>
<tr class="separator:a31cf4023aa8c513b288c21d0147f2091"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Variable-length receive request for UCX stream-based transports. </p>
<p>UCX stream endpoints behave like a byte stream (TCP-like) and do not preserve message boundaries. <a class="el" href="namespaceMTCL.html">MTCL</a> therefore frames each message as:</p>
<p>[uint64_t payload_size][payload bytes]</p>
<p><a class="el" href="classMTCL_1_1requestUCXRecvVar.html" title="Variable-length receive request for UCX stream-based transports.">requestUCXRecvVar</a> implements an MPI-like Irecv where the user provides a buffer capacity (not the exact message size). The request progresses in two phases:</p>
<p>1) Receive exactly the fixed-size header to discover the incoming payload size. 2) Receive the payload:</p><ul>
<li>If payload_size &lt;= capacity, copy the whole payload into the user buffer and complete with count = payload_size.</li>
<li>If payload_size &gt; capacity, no data is copied ato the user buffer. The whole message is drained from the stream into a temporary buffer to keep the stream aligned. The request completes only after draining, returning an error (EMSGSIZE) but still records the real message size in count() so the caller can react.</li>
</ul>
<p>This class exists to prevent stream desynchronization that would occur if a single WAITALL receive were posted with a buffer larger than the actual message, which would consume bytes belonging to subsequent messages and corrupt framing. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a31cf4023aa8c513b288c21d0147f2091" name="a31cf4023aa8c513b288c21d0147f2091"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31cf4023aa8c513b288c21d0147f2091">&#9670;&#160;</a></span>count()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t MTCL::requestUCXRecvVar::count </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="classMTCL_1_1request__internal.html">MTCL::request_internal</a>.</p>

</div>
</div>
<a id="a5615d6cd1ef63c0f6a669bc06dd3f7c6" name="a5615d6cd1ef63c0f6a669bc06dd3f7c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5615d6cd1ef63c0f6a669bc06dd3f7c6">&#9670;&#160;</a></span>make_progress()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int MTCL::requestUCXRecvVar::make_progress </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="classMTCL_1_1request__internal.html">MTCL::request_internal</a>.</p>

</div>
</div>
<a id="aec27d7e24b59bd6e044c467b08f1057c" name="aec27d7e24b59bd6e044c467b08f1057c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec27d7e24b59bd6e044c467b08f1057c">&#9670;&#160;</a></span>test()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int MTCL::requestUCXRecvVar::test </td>
          <td>(</td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>result</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classMTCL_1_1request__internal.html">MTCL::request_internal</a>.</p>

</div>
</div>
<a id="ae01070f7b9ebe07910fcdc63130bfe53" name="ae01070f7b9ebe07910fcdc63130bfe53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae01070f7b9ebe07910fcdc63130bfe53">&#9670;&#160;</a></span>wait()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int MTCL::requestUCXRecvVar::wait </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="classMTCL_1_1request__internal.html">MTCL::request_internal</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/protocols/<a class="el" href="ucx_8hpp_source.html">ucx.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
