<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CommLib: Manager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CommLib
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classManager-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Manager Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="manager_8hpp_source.html">manager.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a35322a2d7f2bcaf5eef57daf0ea6c3aa"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classManager.html#a35322a2d7f2bcaf5eef57daf0ea6c3aa">init</a> (std::string appName, std::string configFile1=&quot;&quot;, std::string configFile2=&quot;&quot;)</td></tr>
<tr class="memdesc:a35322a2d7f2bcaf5eef57daf0ea6c3aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialization of the manager. Required to use the library.  <a href="classManager.html#a35322a2d7f2bcaf5eef57daf0ea6c3aa">More...</a><br /></td></tr>
<tr class="separator:a35322a2d7f2bcaf5eef57daf0ea6c3aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33e1eb5d1e2cf4d4d1b23361d30743e7"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classManager.html#a33e1eb5d1e2cf4d4d1b23361d30743e7">finalize</a> (bool blockflag=false)</td></tr>
<tr class="memdesc:a33e1eb5d1e2cf4d4d1b23361d30743e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finalize the manger closing all the pending open connections.  <a href="classManager.html#a33e1eb5d1e2cf4d4d1b23361d30743e7">More...</a><br /></td></tr>
<tr class="separator:a33e1eb5d1e2cf4d4d1b23361d30743e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13ef8962565fa814360e541e2aaa0d21"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classHandleUser.html">HandleUser</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classManager.html#a13ef8962565fa814360e541e2aaa0d21">getNext</a> (std::chrono::microseconds us=std::chrono::hours(87600))</td></tr>
<tr class="memdesc:a13ef8962565fa814360e541e2aaa0d21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get an handle ready to receive.  <a href="classManager.html#a13ef8962565fa814360e541e2aaa0d21">More...</a><br /></td></tr>
<tr class="separator:a13ef8962565fa814360e541e2aaa0d21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0d2ab1463c5877b990cd7cd3fcb986d"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:af0d2ab1463c5877b990cd7cd3fcb986d"><td class="memTemplItemLeft" align="right" valign="top">static void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classManager.html#af0d2ab1463c5877b990cd7cd3fcb986d">registerType</a> (std::string name)</td></tr>
<tr class="memdesc:af0d2ab1463c5877b990cd7cd3fcb986d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create an instance of the protocol implementation.  <a href="classManager.html#af0d2ab1463c5877b990cd7cd3fcb986d">More...</a><br /></td></tr>
<tr class="separator:af0d2ab1463c5877b990cd7cd3fcb986d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a7189d20e75807bfc390de8fb6b2409"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classManager.html#a2a7189d20e75807bfc390de8fb6b2409">listen</a> (std::string s)</td></tr>
<tr class="memdesc:a2a7189d20e75807bfc390de8fb6b2409"><td class="mdescLeft">&#160;</td><td class="mdescRight">Listen on incoming connections.  <a href="classManager.html#a2a7189d20e75807bfc390de8fb6b2409">More...</a><br /></td></tr>
<tr class="separator:a2a7189d20e75807bfc390de8fb6b2409"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a979f22b5ed25504a85997548bbf37c95"><td class="memItemLeft" align="right" valign="top"><a id="a979f22b5ed25504a85997548bbf37c95"></a>
static <a class="el" href="classHandle.html">Handle</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>connectHandle</b> (std::string s, int retry, unsigned timeout)</td></tr>
<tr class="separator:a979f22b5ed25504a85997548bbf37c95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7eccae2aeb828876fe62dc20ffd70f1a"><td class="memItemLeft" align="right" valign="top"><a id="a7eccae2aeb828876fe62dc20ffd70f1a"></a>
static <a class="el" href="classHandleUser.html">HandleUser</a>&#160;</td><td class="memItemRight" valign="bottom"><b>createTeam</b> (const std::string participants, const std::string root, HandleType type)</td></tr>
<tr class="separator:a7eccae2aeb828876fe62dc20ffd70f1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abca887603242833d007cf50f2961f057"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classHandleUser.html">HandleUser</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classManager.html#abca887603242833d007cf50f2961f057">connect</a> (std::string s, int nretry=-1, unsigned timeout=0)</td></tr>
<tr class="memdesc:abca887603242833d007cf50f2961f057"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connect to a peer.  <a href="classManager.html#abca887603242833d007cf50f2961f057">More...</a><br /></td></tr>
<tr class="separator:abca887603242833d007cf50f2961f057"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52731c2088e57556428ec505b44e1839"><td class="memItemLeft" align="right" valign="top">static std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classManager.html#a52731c2088e57556428ec505b44e1839">getTypeOfHandle</a> (<a class="el" href="classHandleUser.html">HandleUser</a> &amp;h)</td></tr>
<tr class="memdesc:a52731c2088e57556428ec505b44e1839"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given an handle return the name of the protocol instance given in phase of registration.  <a href="classManager.html#a52731c2088e57556428ec505b44e1839">More...</a><br /></td></tr>
<tr class="separator:a52731c2088e57556428ec505b44e1839"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:aa1301868855ff45ebf2bc6734a388429"><td class="memItemLeft" align="right" valign="top"><a id="aa1301868855ff45ebf2bc6734a388429"></a>
class&#160;</td><td class="memItemRight" valign="bottom"><b>ConnType</b></td></tr>
<tr class="separator:aa1301868855ff45ebf2bc6734a388429"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3d857b5b962b99a3ab6332607c16d1c"><td class="memItemLeft" align="right" valign="top"><a id="ad3d857b5b962b99a3ab6332607c16d1c"></a>
class&#160;</td><td class="memItemRight" valign="bottom"><b>CollectiveContext</b></td></tr>
<tr class="separator:ad3d857b5b962b99a3ab6332607c16d1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Main class for the library </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="abca887603242833d007cf50f2961f057"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abca887603242833d007cf50f2961f057">&#9670;&nbsp;</a></span>connect()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classHandleUser.html">HandleUser</a> Manager::connect </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nretry</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>timeout</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Connect to a peer. </p>
<p>Connect to a peer following the URI passed in the connection string or following a label defined in the configuration file. The URI is of the form "PROTOCOL:param:param: ... : param"</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">connectionString</td><td>URI of the peer or label </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a33e1eb5d1e2cf4d4d1b23361d30743e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33e1eb5d1e2cf4d4d1b23361d30743e7">&#9670;&nbsp;</a></span>finalize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void Manager::finalize </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>blockflag</em> = <code>false</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Finalize the manger closing all the pending open connections. </p>
<p>From this point on, no more interactions with the library and the manager should be done. Ideally this call must be invoked just before closing the application (return statement of the main function). Internally it stops the polling thread started at the initialization and calls the end method of each registered protocols. </p>

</div>
</div>
<a id="a13ef8962565fa814360e541e2aaa0d21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13ef8962565fa814360e541e2aaa0d21">&#9670;&nbsp;</a></span>getNext()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classHandleUser.html">HandleUser</a> Manager::getNext </td>
          <td>(</td>
          <td class="paramtype">std::chrono::microseconds&#160;</td>
          <td class="paramname"><em>us</em> = <code>std::chrono::hours(87600)</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get an handle ready to receive. </p>
<p>The returned value is an <a class="el" href="classHandle.html">Handle</a> passed by value. </p>

</div>
</div>
<a id="a52731c2088e57556428ec505b44e1839"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52731c2088e57556428ec505b44e1839">&#9670;&nbsp;</a></span>getTypeOfHandle()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::string Manager::getTypeOfHandle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classHandleUser.html">HandleUser</a> &amp;&#160;</td>
          <td class="paramname"><em>h</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given an handle return the name of the protocol instance given in phase of registration. </p>
<p>Example. If TCP implementation was registered as <a class="el" href="classManager.html#af0d2ab1463c5877b990cd7cd3fcb986d" title="Create an instance of the protocol implementation.">Manager::registerType&lt;ConnTcp&gt;</a>("EX"), this function on handles produced by that kind of protocol instance will return "EX". </p>

</div>
</div>
<a id="a35322a2d7f2bcaf5eef57daf0ea6c3aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35322a2d7f2bcaf5eef57daf0ea6c3aa">&#9670;&nbsp;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int Manager::init </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>appName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>configFile1</em> = <code>&quot;&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>configFile2</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialization of the manager. Required to use the library. </p>
<p>Internally this call creates the backend thread that performs the polling over all registered protocols.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">appName</td><td>Application ID for this application instance </td></tr>
    <tr><td class="paramname">configFile</td><td>(Optional) Path of the configuration file for the application. It can be a unique configuration file containing both architecture information and application specific information (deployment included). </td></tr>
    <tr><td class="paramname">configFile2</td><td>(Optional) Additional configuration file in the case architecture information and application information are splitted in two separate files. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2a7189d20e75807bfc390de8fb6b2409"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a7189d20e75807bfc390de8fb6b2409">&#9670;&nbsp;</a></span>listen()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int Manager::listen </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Listen on incoming connections. </p>
<p>Perform the listen operation on a particular protocol and parameters given by the string passed as parameter.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">connectionString</td><td>URI containing parameters to perform the effective listen operation </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af0d2ab1463c5877b990cd7cd3fcb986d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0d2ab1463c5877b990cd7cd3fcb986d">&#9670;&nbsp;</a></span>registerType()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void Manager::registerType </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create an instance of the protocol implementation. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">T</td><td>class representing the implementation of the protocol being register </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>string representing the name of the instance of the protocol </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/<a class="el" href="manager_8hpp_source.html">manager.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
